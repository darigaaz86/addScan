# Server Configuration
SERVER_PORT=8080
SERVER_HOST=0.0.0.0

# Database Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=address_scanner
POSTGRES_USER=scanner
POSTGRES_PASSWORD=scanner_dev_password
POSTGRES_MAX_CONNECTIONS=100

CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=9000
CLICKHOUSE_DB=address_scanner
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=clickhouse_dev_password

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50

# Supported Chains (comma-separated)
ENABLED_CHAINS=ethereum,base,bnb

# RPC Provider Configuration
# Ethereum
ETHEREUM_RPC_PRIMARY=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
ETHEREUM_RPC_SECONDARY=https://mainnet.infura.io/v3/YOUR_API_KEY
ETHEREUM_POLL_INTERVAL=15s

# Base
BASE_RPC_PRIMARY=https://base-mainnet.g.alchemy.com/v2/YOUR_API_KEY
BASE_RPC_SECONDARY=https://base-mainnet.infura.io/v3/YOUR_API_KEY
BASE_POLL_INTERVAL=15s

# BNB (BSC)
BNB_RPC_PRIMARY=https://bnb-mainnet.g.alchemy.com/v2/YOUR_API_KEY
BNB_RPC_SECONDARY=https://bsc-dataseed.binance.org
BNB_POLL_INTERVAL=15s

# Cache Configuration
CACHE_TTL=20s
CACHE_TRANSACTION_WINDOW=1000

# Backfill Configuration
# Free tier limit: 1000 transactions (hardcoded)
# Paid tier: unlimited (hardcoded)

# Sync Worker Configuration
# Maximum blocks to process per poll cycle
# Default: 30 (based on Alchemy free tier 500 CU/s)
# Increase to 100+ if using Alchemy paid tier for faster catch-up
SYNC_MAX_BLOCKS_PER_POLL=30

# Rate Limiting
RATE_LIMIT_FREE_TIER=1000
RATE_LIMIT_BASIC_TIER=10000
RATE_LIMIT_PREMIUM_TIER=100000

# Alchemy Rate Limiter Configuration
# Total CU budget per second (Alchemy free tier: 500 CU/s)
ALCHEMY_CU_PER_SECOND=500
# Reserved CU budget for priority real-time sync operations (CU/s)
ALCHEMY_RESERVED_CU=300
# Shared CU budget for best-effort backfill operations (CU/s)
ALCHEMY_SHARED_CU=200
# Sliding window size for CU consumption tracking (milliseconds)
ALCHEMY_WINDOW_SIZE_MS=1000
# Warning threshold percentage - emit warning when usage exceeds this (0-100)
ALCHEMY_WARNING_THRESHOLD=80
# Pause threshold percentage - backfill pauses when usage exceeds this (0-100)
ALCHEMY_PAUSE_THRESHOLD=90
# Default CU cost for unknown RPC methods
ALCHEMY_DEFAULT_METHOD_COST=20

# Etherscan API (for complete transaction history - most chains)
# Get free API key at https://etherscan.io/apis
ETHERSCAN_API_KEY=

# Dune Sim API (for BNB chain - Etherscan free tier doesn't support BNB)
# Get API key at https://dune.com/
DUNE_API_KEY=

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
